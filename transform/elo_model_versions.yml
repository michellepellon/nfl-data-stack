# ELO Model Version History
# Freeze model parameters for reproducibility and A/B testing

versions:
  v0.0:
    description: "Baseline ELO model - frozen 2025-11-08"
    frozen_date: "2025-11-08"

    # Core ELO parameters
    parameters:
      k_factor: 20                    # Learning rate for ELO updates
      home_advantage: 52               # Home field advantage in ELO points
      elo_base: 400                    # ELO scale constant (standard chess scale)

      # Margin of victory (MOV) multiplier
      mov_formula: "ln(|point_diff| + 1) * (2.2 / (|elo_diff| * 0.001 + 2.2))"
      mov_constant: 2.2                # MOV dampening factor
      mov_elo_scale: 0.001             # ELO differential scaling in MOV

      # Random seed for reproducibility
      random_seed: 42

    # Baseline performance (2025 season, weeks 1-18, 272 games)
    performance:
      brier_score: 0.1702
      log_loss: 0.5155
      accuracy: 0.751
      mae_spread: 10.71
      rmse_spread: 11.88
      ats_accuracy: 0.653

      # Calibration metrics
      reliability: 0.0048              # Lower is better
      resolution: 0.0150               # Higher is better
      uncertainty: 0.2373

    # Data snapshot
    evaluation:
      season: 2025
      weeks_evaluated: 13              # Weeks with completed games
      total_games: 272                 # Total games in dataset
      evaluated_games: 31              # Games with actual results

    # Model architecture
    features:
      - "Pure ELO ratings (no adjustments)"
      - "Home field advantage: 52 points"
      - "Margin of victory multiplier"
      - "FiveThirtyEight-style ELO formula"

    notes: |
      This is the baseline pure ELO model with no feature adjustments.

      Performance Notes:
      - Brier score of 0.17 is excellent for NFL prediction
      - 75% accuracy on 2025 season games
      - Model is well-calibrated (reliability = 0.0048)
      - Spread predictions average 10.7 points error

      Critical Bug Fixed:
      - 2025-11-08: Fixed join key in nfl_reg_season_simulator.sql
      - Previous: Joined on game_id (incorrect, caused mismatched results)
      - Current: Joins on week_number + home_team + visiting_team (correct)
      - This bug was causing completely invalid metrics before the fix

      Reproducibility:
      - Random seed: 42 (set in dbt_project.yml)
      - 10,000 Monte Carlo simulations per game
      - Predictions saved in nfl_reg_season_predictions view
      - Model performance tracked in nfl_model_performance table
